lint-passengers:
  only:
    - merge_requests
  tags:
    - twl-monorepo-shell
  stage: lint
  before_script:
    - echo $PATH
    - source ~/.bashrc
    - echo $PATH
    - npm -v
    - yarn -v
    - node -v
    - aws --version
    - find ./apps -mindepth 1 -not -path "./apps/walts-vault-frontend*" -delete
    - yarn install --pure-lockfile
  script:
    - echo "LINT"
    - yarn workspace walts-vault-frontend lint

deploy-walts-vault-frontend-production:
  only:
    - walts-vault-frontend-production
  tags:
    - twl-monorepo-shell
  stage: deploy
  before_script:
    - echo $PATH
    - source ~/.bashrc
    - echo $PATH
    - npm -v
    - yarn -v
    - node -v
    - aws --version
    - find ./apps -mindepth 1 -not -path "./apps/walts-vault-frontend*" -delete
    - yarn install --pure-lockfile
  script:
    - echo "DEPLOY"
    - yarn workspace walts-vault-frontend deploy
  environment:
    name: production
    url: https://waltsvault.xyz
